#SERP model with LiDAR

bodies:

  - name: base_link
    enabled: true
    pose: [0, 0, 0]
    type: dynamic
    color: [0, 0, 1, 0.75]
    footprints:
      - type: polygon
        density: 1
        layers: ["no_laser"]
        points: [ [-0.117, -0.055],
                  [-0.022, -0.055],
                  [-0.022, -0.085],
                  [0.048, -0.085],
                  [0.048, 0.085],
                  [-0.022, 0.085],
                  [-0.022, 0.055],
                  [-0.117, 0.055] ]
#        points: [ [-0.117, -0.055],
#                  [0.048, -0.055],
#                  [0.048, 0.055],
#                  [-0.117, 0.055] ]
#
#  - name: left_wheel
#    color: [1, 1, 0, 0.75] 
#    footprints:
#      - type: polygon
#        density: 1.0
#        layers: ["no_laser"]
#        points: [ [ -0.035, -0.0125],
#                  [ 0.035,  -0.0125],
#                  [ 0.035, 0.0125],
#                  [ -0.035, 0.0125] ]
#  - name: right_wheel
#    color: [1, 1, 0, 0.75] 
#    footprints:
#      - type: polygon
#        density: 1.0
#        layers: ["no_laser"]
#        points: [ [ -0.035, -0.0125],
#                  [ 0.035,  -0.0125],
#                  [ 0.035, 0.0125],
#                  [ -0.035, 0.0125] ]
#
#joints: 
#  - type: weld
#    name: left_wheel_weld
#    bodies: 
#     - name: left_wheel
#        anchor: [0, 0]
#      - name: base_link
#        anchor: [0, -0.0725]
#
#  - type: weld
#    name: right_wheel_weld  
#    bodies: 
#      - name: right_wheel
#        anchor: [0, 0]
#      - name: base_link
#        anchor: [0, 0.0725]

plugins:
  - type: DiffDrive
    name: serp_diff_drive
    body: base_link
    pub_rate: 10
    twist_sub: cmd_vel
    odom_frame_id: odom
    odom_pub: odom  # topic odom is published on
  
  - type: ModelTfPublisher
    name: tf_publisher
    publish_tf_world: false

   #original lidar
#  - type: Laser
#    name: lidar
#    topic: lidar_scan
#    body: base_link
#    range: 30
#    angle: {min: -3.1415926535897931, max: 3.1415926535897931, increment: 0.03490658503988659}
#    layers: ["map"]
#    update_rate: 100
#    #noise_std_dev: 0.01

  #lidar for DRL
  - type: Laser
    name: static_laser
    frame: static_laser_link
    topic: static_laser
    body: base_link
    broadcast_tf: true
    origin: [0.0, 0.0, 0.0]
    range: 10
    # angle: {min: -3.14159265359, max: 3.14159265359, increment: 0.05235987755}
    angle: {min: -3.14159265359, max: 3.14159265359, increment: 0.06981317007}
    noise_std_dev: 0.015
    update_rate: 10
    layers: ["static"]
  
  #simplified LiDAR for tutorial
  - type: Laser
    name: simple_lidar
    frame: simple_lidar_link
    topic: simple_lidar
    body: base_link
    broadcast_tf: true
    origin: [0.0, 0.0, 0.0]
    range: 10
    # angle: {min: -3.14159265359, max: 3.14159265359, increment: 0.05235987755}
    angle: {min: -2.35619449019, max: 3.14159265359, increment:   0.78539816339} 
    #noise_std_dev: 0.015
    update_rate: 10
    layers: ["static"]